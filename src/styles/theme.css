/**
 * Portal theme: members-only identity + dark mode.
 * Light mode uses a subtle green tint so the portal feels distinct from the public site.
 * Dark mode uses a green-tinted palette that matches the brand and passes contrast (WCAG AA).
 * Toggle persists in localStorage (key: clrhoa_theme).
 */

:root {
  --portal-bg: #f1f6f3;
  --portal-header-bg: #ffffff;
  --portal-header-border: #e5e7eb;
  --portal-accent: #1e5f38;
  --portal-card-bg: #ffffff;
  --portal-card-border: #e5e7eb;
  --portal-text: #111827;
  --portal-text-muted: #4b5563;
  --portal-input-bg: #ffffff;
  --portal-input-border: #e5e7eb;
}

/* Dark mode: green-tinted palette aligned with brand (deep green, warm accents), WCAG AA 4.5:1 contrast */
html.dark,
.dark {
  --portal-bg: #0d1411;
  --portal-header-bg: #151e19;
  --portal-header-border: #2a3630;
  --portal-accent: #5cb88a;
  --portal-accent-dim: #3d8a65;
  --portal-card-bg: #151e19;
  --portal-card-border: #2a3630;
  /* Global dark text: primary ≥4.5:1 on card bg #151e19, muted ≥4.5:1 for secondary (use in CSS and Tailwind dark:) */
  --text-primary-dark: #e8efe9;
  --text-muted-dark: #b8c4bd;
  --portal-text: var(--text-primary-dark);
  --portal-text-muted: var(--text-muted-dark);
  --portal-input-bg: #1a2520;
  --portal-input-border: #2d3d35;
  --portal-hover-bg: #1e2924;
  --portal-orange: #e4a574;
}

/* Apply theme to portal (light and dark) */
.portal-theme-bg {
  background-color: var(--portal-bg);
}
html.dark .portal-theme-bg {
  background-color: var(--portal-bg);
}
html.dark .portal-theme-header {
  background-color: var(--portal-header-bg);
  border-color: var(--portal-header-border);
}
html.dark .portal-theme-card {
  background-color: var(--portal-card-bg);
  border-color: var(--portal-card-border);
}
html.dark .portal-theme-text {
  color: var(--portal-text);
}
html.dark .portal-theme-text-muted {
  color: var(--portal-text-muted);
}
html.dark .portal-theme-input {
  background-color: var(--portal-input-bg);
  border-color: var(--portal-input-border);
  color: var(--portal-text);
}
/* Inputs and textareas without .portal-theme-input (e.g. in board/portal forms) */
html.dark input[type="text"],
html.dark input[type="email"],
html.dark input[type="tel"],
html.dark input[type="number"],
html.dark input[type="date"],
html.dark textarea {
  background-color: var(--portal-input-bg);
  border-color: var(--portal-input-border);
  color: var(--text-primary-dark);
}
html.dark input::placeholder,
html.dark textarea::placeholder {
  color: var(--text-muted-dark);
  opacity: 0.9;
}

/* Portal page wrapper: use with min-h-screen for consistent members-area background */
.portal-page-bg {
  background-color: var(--portal-bg);
}

/* Header accent bar (members area indicator) */
.portal-header-accent {
  border-bottom: 2px solid var(--portal-accent);
}

/* Main content cards: subtle left accent so portal feels polished and distinct */
.portal-card-accent {
  border-left: 4px solid var(--portal-accent);
}

/* Dark mode: override Tailwind brand/gray classes so portal content stays readable */
html.dark .text-clr-green {
  color: var(--portal-accent);
}
html.dark .hover\:text-clr-green:hover {
  color: var(--portal-accent);
}
html.dark .bg-clr-green {
  background-color: var(--portal-accent-dim);
}
html.dark .bg-clr-green:hover {
  filter: brightness(1.1);
}
html.dark .text-clr-orange {
  color: var(--portal-orange);
}
html.dark .border-clr-green,
html.dark .focus\:ring-clr-green:focus,
html.dark .focus\:border-clr-green:focus {
  border-color: var(--portal-accent);
  --tw-ring-color: var(--portal-accent);
}
html.dark .text-gray-500,
html.dark .text-gray-600,
html.dark .text-gray-700 {
  color: var(--portal-text-muted);
}
html.dark .text-gray-400 {
  color: var(--text-muted-dark);
}
html.dark .text-gray-900 {
  color: var(--portal-text);
}

/* Dropdowns and [role="menu"]: force primary text (4.5:1) over gray so link text is readable */
html.dark [role="menu"] a,
html.dark [role="menu"] .text-gray-700 {
  color: var(--text-primary-dark);
}
html.dark [role="menu"] a:hover {
  color: var(--portal-accent);
}
html.dark .bg-white {
  background-color: var(--portal-card-bg);
}
html.dark .border-gray-100,
html.dark .border-gray-200 {
  border-color: var(--portal-card-border);
}
html.dark .hover\:bg-gray-50:hover,
html.dark .hover\:bg-gray-100:hover {
  background-color: var(--portal-hover-bg);
}
html.dark .bg-gray-50 {
  background-color: var(--portal-hover-bg);
}
html.dark .bg-clr-beige\/10,
html.dark .bg-clr-beige\/20,
html.dark .bg-clr-beige\/30 {
  background-color: rgba(26, 37, 32, 0.6);
}
html.dark .bg-clr-green\/10 {
  background-color: rgba(93, 184, 138, 0.15);
}
html.dark .border-clr-green\/20,
html.dark .border-clr-green\/30 {
  border-color: rgba(93, 184, 138, 0.3);
}
/* File input and buttons in dark mode */
html.dark .file\:bg-clr-green {
  background-color: var(--portal-accent-dim);
}
html.dark .file\:text-white {
  color: #fff;
}

/* Select / dropdown: ensure 4.5:1 text in dark (maintenance, forms). Native <option> styling is limited in some browsers; closed select is guaranteed. */
html.dark select,
html.dark select.portal-theme-input,
html.dark select.border-gray-200,
html.dark select.border-gray-300 {
  background-color: var(--portal-input-bg) !important;
  border-color: var(--portal-input-border) !important;
  color: var(--text-primary-dark) !important;
}
html.dark select option,
html.dark select.portal-theme-input option,
html.dark select.border-gray-200 option {
  background-color: var(--portal-input-bg);
  color: var(--text-primary-dark);
}

/* Status pills on cards (e.g. maintenance): dark-friendly, 4.5:1 contrast */
html.dark .bg-gray-100.text-gray-700 {
  background-color: var(--portal-hover-bg);
  color: var(--text-primary-dark);
}
html.dark .bg-amber-100.text-amber-800 {
  background-color: rgba(180, 83, 9, 0.35);
  color: #fcd34d;
}
html.dark .bg-green-100.text-green-800 {
  background-color: rgba(21, 128, 61, 0.35);
  color: #86efac;
}
