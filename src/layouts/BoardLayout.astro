---
/**
 * Shared layout for board/admin/ARB pages. Uses the same chrome as the portal
 * (PortalLayout + PortalNav) so board pages feel part of the member portal.
 */
import '../styles/tailwind.css';
import PortalLayout from './PortalLayout.astro';
import ProtectedPage from '../components/ProtectedPage.astro';
import PortalNav from '../components/PortalNav.astro';
import PortalElevatedRoleBanner from '../components/PortalElevatedRoleBanner.astro';
import BoardNav from '../components/BoardNav.astro';

interface Props {
  title: string;
  subtitle?: string;
  draftCount?: number;
  role: string;
  /** Optional: wider main (e.g. audit logs). Default max-w-4xl */
  mainWide?: boolean;
  /** Show elevated-role banner (only on pages that modify members or content). Default true. Set false for read-only e.g. audit logs. */
  showRoleBanner?: boolean;
}
const { title, subtitle = '', draftCount = 0, role, mainWide = false, showRoleBanner = true } = Astro.props;
const currentPath = Astro.url.pathname;
---

<PortalLayout title={`${title} | Board | Member Portal | Crooked Lake Reserve HOA`}>
  <ProtectedPage>
    <div class="min-h-screen portal-theme-bg font-body">
      <PortalNav currentPath={currentPath} draftCount={draftCount} role={role} />
      {showRoleBanner && <PortalElevatedRoleBanner role={role} />}
      <BoardNav currentPath={currentPath} />

      <main class={mainWide ? 'max-w-5xl mx-auto px-4 sm:px-6 py-8 sm:py-12' : 'max-w-4xl mx-auto px-4 sm:px-6 py-8 sm:py-12'}>
        <div class="mb-6">
          <h1 class="text-xl font-heading font-bold text-clr-green">{title}</h1>
          {subtitle && <p class="text-sm text-gray-500 mt-0.5">{subtitle}</p>}
        </div>
        <slot />
      </main>
    </div>
  </ProtectedPage>
</PortalLayout>
