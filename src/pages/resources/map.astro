---
import ResourcesLayout from '../../layouts/ResourcesLayout.astro';

// Physical address from environment variables
const physicalStreet = import.meta.env.PUBLIC_PHYSICAL_ADDRESS_STREET ?? '2 Lakes Ln';
const physicalCity = import.meta.env.PUBLIC_PHYSICAL_ADDRESS_CITY ?? 'Eustis';
const physicalState = import.meta.env.PUBLIC_PHYSICAL_ADDRESS_STATE ?? 'FL';
const physicalZip = import.meta.env.PUBLIC_PHYSICAL_ADDRESS_ZIP ?? '32726';
const fullAddress = `${physicalStreet}, ${physicalCity}, ${physicalState} ${physicalZip}`;
const mapDescription = `Crooked Lake Reserve - ${fullAddress}. Satellite view and Lake County GIS parcel map.`;
---

<ResourcesLayout title="Community Map" description={mapDescription} currentSection="map">
  <div class="max-w-7xl mx-auto">
    <div class="max-w-2xl mx-auto mb-8">
      <h1 class="text-4xl font-heading font-bold text-clr-green mb-4 text-center">Community Map</h1>
      <p class="text-gray-700 font-body text-center">
        Crooked Lake Reserve is on <strong>{physicalStreet}</strong>, {physicalCity}, {physicalState} {physicalZip}. Satellite view below; use <strong>Lake County GIS</strong> for official parcel boundaries and lot lines. Lake access: West Crooked Lake (lots 10–14), Lake Dicie (lots 15–24).
      </p>
    </div>

    <!-- Lake County GIS: official parcel boundaries -->
    <section class="mb-8 max-w-2xl mx-auto">
      <div class="bg-clr-green/10 border border-clr-green/30 rounded-2xl p-6 text-center">
        <h2 class="text-xl font-heading font-bold text-clr-green mb-2">Official parcel boundaries</h2>
        <p class="text-gray-700 font-body text-sm mb-4">
          Lake County's GIS map shows tax parcels, subdivision boundaries, and property info for Crooked Lake Reserve. Use it for lot lines and parcel numbers.
        </p>
        <a
          href="https://gis.lakecountyfl.gov/gisweb/?x=438423.2796035267&y=1635844.2686086139&l=14&query=%22Crooked%20Lake%20Reserve%22"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-2 bg-clr-green hover:brightness-110 text-white px-6 py-3 rounded-xl font-semibold text-sm shadow-lg transition-all font-body"
        >
          Open Lake County GIS (Crooked Lake Reserve) →
        </a>
      </div>
    </section>

    <!-- Google Maps embed: satellite view -->
    <section class="mb-8">
      <div class="bg-white p-2 sm:p-4 rounded-2xl shadow-sm border border-gray-100 max-w-5xl mx-auto overflow-hidden">
        <p class="text-sm text-clr-gray font-body mb-2 text-center">Satellite view - {fullAddress}</p>
        <div class="aspect-video w-full rounded-xl overflow-hidden bg-gray-100">
          <iframe
            title={`Crooked Lake Reserve - ${fullAddress} satellite view on Google Maps`}
            src={`https://www.google.com/maps?q=${encodeURIComponent(fullAddress)}&z=17&t=k&output=embed`}
            width="100%"
            height="100%"
            style="border:0; min-height: 400px;"
            allowfullscreen
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          />
        </div>
        <p class="text-sm text-clr-gray font-body mt-3 text-center">
          <a
            href="https://www.google.com/maps/@28.833739,-81.683344,17z/data=!3m1!1e3"
            target="_blank"
            rel="noopener noreferrer"
            class="text-clr-orange hover:underline font-semibold"
          >
            Open in Google Maps (satellite) →
          </a>
        </p>
      </div>
    </section>
  </div>
</ResourcesLayout>
