---
/**
 * Privacy-friendly analytics component
 * 
 * Currently supports:
 * - Plausible Analytics (privacy-friendly, GDPR compliant, no cookies)
 * 
 * To enable:
 * 1. Set PUBLIC_ANALYTICS_PROVIDER="plausible" in environment variables
 * 2. Set PUBLIC_PLAUSIBLE_DOMAIN to your Plausible domain (e.g., "clrhoa.com")
 * 
 * For other providers, extend this component or create provider-specific components.
 */

const analyticsProvider = import.meta.env.PUBLIC_ANALYTICS_PROVIDER || '';
const plausibleDomain = import.meta.env.PUBLIC_PLAUSIBLE_DOMAIN || '';

// Only render analytics if enabled and configured
const isPlausibleEnabled = analyticsProvider === 'plausible' && plausibleDomain;
---

{isPlausibleEnabled && (
  <>
    {/* Plausible Analytics - Privacy-friendly, GDPR compliant, no cookies */}
    {/* Note: SRI hash may need updating when Plausible updates their script */}
    {/* Generate new hash: node scripts/generate-sri.js https://plausible.io/js/script.js */}
    <script
      defer
      data-domain={plausibleDomain}
      src="https://plausible.io/js/script.js"
      integrity="sha384-TDBMBYT3vz715r8UIyVTB4AUTXubXmLI02DeDWgyDahvCXmPV4Vgx2m6yQvI19d/"
      crossorigin="anonymous"
    />
    {/* Optional: Enable hash-based routing if using client-side routing */}
    {/* <script defer data-domain={plausibleDomain} src="https://plausible.io/js/script.hash.js"></script> */}
  </>
)}
